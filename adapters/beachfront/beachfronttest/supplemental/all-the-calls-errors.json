{
  "mockBidRequest":
  {
    "id":"61b87329-8790-47b7-90dd-c53ae7ce1723",
    "tmax":1000,
    "source":{
      "tid":"61b87329-8790-47b7-90dd-c53ae7ce1723"
    },
    "imp":[
      {
        "id":"Mixed1",
        "ext":{
          "bidder":{
            "videoResponseType":"adm",
            "bidfloor":0.01,
            "appIds": {
              "banner" : "3b16770b-17af-4d22-daff-9606bdf2c9c3",
              "video" : "throwTestError"
            }
          }
        },
        "video":{
          "mimes":[
            "video/mp4"
          ],
          "context":"instream",
          "w":300,
          "h":250
        },
        "banner":{
          "format":[
            {
              "w":300,
              "h":250
            }
          ]
        }
      },
      {
        "id": "built2spill",
        "bidfloor": 0.02,
        "banner": {
          "format": [
            {
              "w": 300,
              "h": 250
            }
          ]
        },
        "ext": {
          "bidder": {
            "bidfloor": 0.02,
            "appId": "throwTestError"
          }
        }
      },
      {
        "id":"video2",
        "ext":{
          "bidder":{
            "videoResponseType":"both",
            "bidfloor":0.01,
            "appId":"0c0c62c7-8fe6-4023-90a2-d6148f331823"
          }
        },
        "video":{
          "mimes":[
            "video/mp4"
          ],
          "context":"instream",
          "w":300,
          "h":250
        }
      },      {
        "id":"video3",
        "ext":{
          "bidder":{
            "videoResponseType":"adm",
            "bidfloor":0.01,
            "appId":"11bc5dd5-7421-4dd8-c926-40fa653bec76"
          }
        },
        "video":{
          "mimes":[
            "video/mp4"
          ],
          "context":"instream",
          "w":300,
          "h":250
        }
      },      {
        "id":"video4",
        "ext":{
          "bidder":{
            "videoResponseType":"nurl",
            "bidfloor":0.01,
            "appId":"11bc5dd5-7421-4dd8-c926-40fa653bec76"
          }
        },
        "video":{
          "mimes":[
            "video/mp4"
          ],
          "context":"instream",
          "w":300,
          "h":250
        }
      }
    ],
    "site":{
      "publisher":{
        "id":"publisher1"
      },
      "page": "http://example.com/whatever/something.html"
    },
    "user": {
      "id": "some-user",
      "buyeruid": "some-buyer"
    },
    "device": {
      "devicetype": 2,
      "ip": "127.0.0.1",
      "ua": "Opera/9.80 (X11; Linux i686; Ubuntu/14.10) Presto/2.12.388 Version/12.16"
    }
  } ,
  "httpCalls": [
    {
      "expectedRequest":  {
        "uri": "https://display.bfmio.com/prebid_display",
        "body": {
          "slots":[
            {
              "slot":"Mixed1",
              "id":"3b16770b-17af-4d22-daff-9606bdf2c9c3",
              "bidfloor":0,
              "sizes":[
                {
                  "w":300,
                  "h":250
                }
              ]
            }
          ],
          "domain":"example.com",
          "page":"http://example.com/whatever/something.html",
          "referrer":"",
          "search":"",
          "secure":0,
          "deviceOs":"",
          "deviceModel":"",
          "isMobile":0,
          "ua":"Opera/9.80 (X11; Linux i686; Ubuntu/14.10) Presto/2.12.388 Version/12.16",
          "dnt":0,
          "user":{
            "id":"some-user",
            "buyeruid":"some-buyer"
          },
          "adapterName":"BF_PREBID_S2S",
          "adapterVersion":"1.0.0",
          "ip":"192.168.255.255",
          "requestId":"61b87329-8790-47b7-90dd-c53ae7ce1723"
        }
      },
      "mockResponse": {
        "status" : 200,
        "body": {
          "crid": "crid_1",
          "price": 9.516373,
          "w": 300,
          "h": 250,
          "slot": "Mixed1",
          "adm": "<div style=\"width:300px; height:250px;\"><img src=\"http://via.placeholder.com/300x250\" ></div>"
        }
      }
    }, {
      "expectedRequest": {
        "uri": "https://reachms.bfmio.com/bid.json?exchange_id=0c0c62c7-8fe6-4023-90a2-d6148f331823",
        "body": {
          "id":"61b87329-8790-47b7-90dd-c53ae7ce1723",
          "imp":[{
              "ext": {
                "bidder": {
                    "appId": "0c0c62c7-8fe6-4023-90a2-d6148f331823",
                    "bidfloor": 0.01,
                    "videoResponseType": "both"
                  }
                },
              "id": "video2",
              "secure": 0,
              "video": {
                "h": 250,
                "mimes": [
                    "video/mp4"
                  ],
                "w": 300
              }
            }

          ],
          "site":{
            "domain":"example.com",
            "page":"http://example.com/whatever/something.html",
            "publisher":{
              "id":"publisher1"
            }
          },
          "device":{
            "ua":"Opera/9.80 (X11; Linux i686; Ubuntu/14.10) Presto/2.12.388 Version/12.16",
            "ip":"192.168.255.255",
            "devicetype":2
          },
          "user":{
            "id":"some-user",
            "buyeruid":"some-buyer"
          },
          "tmax":1000,
          "cur":[
            "USD"
          ],
          "source":{
            "tid":"61b87329-8790-47b7-90dd-c53ae7ce1723"
          }
        }
      },
      "mockResponse": {
        "status" : 200,
        "body": {
          "id": "5f4f8790dca51d29347f4dd8",
          "seatbid": [
            {
              "bid": [
                {
                  "id": "5f4f8790dca51d29347f4ddb0",
                  "impid": "Mixed1",
                  "price": 0.8,
                  "adm": "<?xml version=\"1.0\" ?><VAST version=\"2.0\"><Ad id=\"466052105\"><InLine><AdSystem>DCM</AdSystem><AdTitle>In-Stream Video</AdTitle><MediaFiles><MediaFile delivery=\"progressive\" type=\"video/mp4\" bitrate=\"18716\" width=\"1920\" height=\"1080\"><![CDATA[https://cdn.bfmlib.com/2020-04-10/19/5e90c507bfa0b944b470b5ab/fc71388688ba8beb8ccb7cde16e0a284.mp4]]></MediaFile></MediaFiles></Linear></Creative></Creatives></InLine></Ad></VAST>",
                  "adid": "22273",
                  "adomain": [
                    "opportunitywisconsin.org"
                  ],
                  "cid": "1551",
                  "crid": "crid2",
                  "cat": [
                    "IAB2"
                  ],
                  "attr": [],
                  "w": 0,
                  "h": 0,
                  "ext": {
                    "duration": 30
                  }
                },
                {
                  "id": "5f4f8790dca51d29347f4ddb1",
                  "impid": "video2",
                  "price": 1.6,
                  "adm": "<?xml version=\"1.0\" ?><VAST version=\"2.0\"><Ad id=\"00vliyse-s\"><InLine><AdSystem>DCM</AdSystem><AdTitle>In-Stream Video</AdTitle><MediaFiles><MediaFile delivery=\"progressive\" type=\"video/mp4\" bitrate=\"2134\" width=\"1280\" height=\"720\"><![CDATA[https://cdn.bfmlib.com/2020-07-30/22/5f2346b2bfa0b93795dbc3c3/a04cf98c539963254780af763b09c7c6.mp4]]></MediaFile><MediaFile delivery=\"progressive\" type=\"video/mp4\" bitrate=\"1245\" width=\"640\" height=\"360\"><![CDATA[https://cdn.bfmlib.com/2020-07-30/22/5f2346b2bfa0b93795dbc3c3/23a4243ca4c1b504a1300834a39157f5.mp4]]></MediaFile><MediaFile delivery=\"progressive\" type=\"video/mp4\" bitrate=\"2220\" width=\"640\" height=\"360\"><![CDATA[https://cdn.bfmlib.com/2020-07-30/22/5f2346b2bfa0b93795dbc3c3/2fab70865b0ea1ca39b8fcaa196f3ec7.mp4]]></MediaFile><MediaFile delivery=\"progressive\" type=\"video/mp4\" bitrate=\"1734\" width=\"1920\" height=\"1080\"><![CDATA[https://cdn.bfmlib.com/2020-07-30/22/5f2346b2bfa0b93795dbc3c3/1bdadee1e8b9415af3dca4dac7dd2d72.mp4]]></MediaFile><MediaFile delivery=\"progressive\" type=\"video/mp4\" bitrate=\"1641\" width=\"1280\" height=\"720\"><![CDATA[https://cdn.bfmlib.com/2020-07-30/22/5f2346b2bfa0b93795dbc3c3/67d0e3e50c66424630dcd49a60d5932d.mp4]]></MediaFile></MediaFiles></Linear></Creative></Creatives></InLine></Ad></VAST>",
                  "adid": "22273",
                  "adomain": [
                    "trekk.com"
                  ],
                  "cid": "1551",
                  "crid": "crid8",
                  "cat": [
                    "IAB2"
                  ],
                  "attr": [],
                  "w": 0,
                  "h": 0,
                  "ext": {
                    "duration": 30
                  }
                }
              ],
              "seat": "bfb-io-s1"
            }
          ],
          "cur": "USD"
        }
      }
    }, {
      "expectedRequest": {
        "uri": "https://reachms.bfmio.com/bid.json?exchange_id=11bc5dd5-7421-4dd8-c926-40fa653bec76",
        "body": {
          "id":"61b87329-8790-47b7-90dd-c53ae7ce1723",
          "imp":[
            {
              "id":"video3",
              "secure":0,
              "video":{
                "mimes":[
                  "video/mp4"
                ],
                "w":300,
                "h":250
              },
              "ext":{
                "bidder":{
                  "videoResponseType":"adm",
                  "bidfloor":0.01,
                  "appId":"11bc5dd5-7421-4dd8-c926-40fa653bec76"
                }
              }
            }
          ],
          "site":{
            "domain":"example.com",
            "page":"http://example.com/whatever/something.html",
            "publisher":{
              "id":"publisher1"
            }
          },
          "device":{
            "ua":"Opera/9.80 (X11; Linux i686; Ubuntu/14.10) Presto/2.12.388 Version/12.16",
            "ip":"192.168.255.255",
            "devicetype":2
          },
          "user":{
            "id":"some-user",
            "buyeruid":"some-buyer"
          },
          "tmax":1000,
          "cur":[
            "USD"
          ],
          "source":{
            "tid":"61b87329-8790-47b7-90dd-c53ae7ce1723"
          }
        }
      },
      "mockResponse": {
        "status" : 200,
        "body": {
          "id": "61b87329-8790-47b7-90dd-c53ae7ce1723",
          "seatbid": [
            {
              "bid": [
                {
                  "id": "5f4f8790b9f0fc0e98b5db47",
                  "impid": "video3",
                  "price": 20.0,
                  "adm": "<?xml version=\"1.0\" encoding=\"utf-8\"?><VAST version=\"2.0\"><Ad id=\"VPAID\"><InLine><AdSystem version=\"2.0\">IO</AdSystem><AdTitle>Neptune</AdTitle><Impression></Impression><Creatives><Creative sequence=\"1\"><Linear><Duration>00:00:15</Duration><MediaFiles><MediaFile delivery=\"progressive\" width=\"640\" height=\"480\" scalable=\"1\" type=\"application/javascript\" apiFramework=\"VPAID\"><![CDATA[http://player-cdn.beachfrontmedia.com/players/neptune/3/20/1/neptune-player.js]]></MediaFile></MediaFiles></Linear></Creative></Creatives></InLine></Ad></VAST>",
                  "adid": "1088",
                  "adomain": [
                    "beachfront.io"
                  ],
                  "cid": "277",
                  "crid": "532",
                  "w": 300,
                  "h": 250,
                  "ext": {
                    "duration": 15
                  }
                }
              ],
              "seat": "bfb-io-s1"
            }
          ],
          "bidid": "5f4f8790b9f0fc0e98b5db47",
          "cur": "USD"
        }
      }
    }, {
      "expectedRequest": {
        "uri": "https://reachms.bfmio.com/bid.json?exchange_id=0c0c62c7-8fe6-4023-90a2-d6148f331823&prebidserver",
        "body": {
          "isPrebid":true,
          "id":"61b87329-8790-47b7-90dd-c53ae7ce1723",
          "imp":[
            {
              "id":"video2",
              "secure": 0,
              "video":{
                "mimes":[
                  "video/mp4"
                ],
                "w":300,
                "h":250
              },
              "ext":{
                "bidder":{
                  "videoResponseType":"both",
                  "bidfloor":0.01,
                  "appId": "0c0c62c7-8fe6-4023-90a2-d6148f331823"
                }
              }
            }
          ],
          "site":{
            "domain":"example.com",
            "page":"http://example.com/whatever/something.html",
            "publisher":{"id":"publisher1"}
          },
          "device":{
            "ua":"Opera/9.80 (X11; Linux i686; Ubuntu/14.10) Presto/2.12.388 Version/12.16",
            "ip":"192.168.255.255",
            "devicetype":2
          },
          "user":{
            "id":"some-user",
            "buyeruid":"some-buyer"
          },
          "tmax":1000,
          "cur":[
            "USD"
          ],
          "source":{
            "tid":"61b87329-8790-47b7-90dd-c53ae7ce1723"
          }
        }
      },
      "mockResponse": {
        "status" : 200,
        "body": {
          "id": "61b87329-8790-47b7-90dd-c53ae7ce1723",
          "seatBid": [
            {
              "bid": [
                {
                  "id": "video2",
                  "price": 7.2000003,
                  "nurl": "https://useast.bfmio.com/getmu?aid=bid:734f3668-f37b-4a9a-93a5-48b71b126c39:0c0c62c7-8fe6-4023-90a2-d6148f331823:7.2000003:9.0&v=1&dsp=5f4faa490bec5e1d4b4b87b1,0.01&i_type=pre",
                  "adomain": [],
                  "cat": [],
                  "attr": [],
                  "w": 0,
                  "h": 0,
                  "ext": {}
                }
              ],
              "group": 0,
              "ext": {}
            }
          ]
        }
      }
    }, {
      "expectedRequest": {
        "uri": "https://reachms.bfmio.com/bid.json?exchange_id=11bc5dd5-7421-4dd8-c926-40fa653bec76&prebidserver",
        "body": {
          "isPrebid":true,
          "id":"61b87329-8790-47b7-90dd-c53ae7ce1723",
          "imp":[
            {
              "id":"video4",
              "secure": 0,
              "video":{
                "mimes":["video/mp4"],
                "w":300,
                "h":250
              },
              "ext":{
                "bidder": {
                  "appId": "11bc5dd5-7421-4dd8-c926-40fa653bec76",
                  "bidfloor": 0.01,
                  "videoResponseType": "nurl"
                }
              }
            }
          ],
          "site":{
            "domain":"example.com",
            "page":"http://example.com/whatever/something.html",
            "publisher":{"id":"publisher1"}
          },
          "device":{
            "ua":"Opera/9.80 (X11; Linux i686; Ubuntu/14.10) Presto/2.12.388 Version/12.16",
            "ip":"192.168.255.255",
            "devicetype":2
          },
          "user":{
            "id":"some-user",
            "buyeruid":"some-buyer"
          },
          "tmax":1000,
          "cur":[
            "USD"
          ],
          "source":{
            "tid":"61b87329-8790-47b7-90dd-c53ae7ce1723"
          }
        }
      },
      "mockResponse": {
        "status" : 200,
        "body": {
          "id": "61b87329-8790-47b7-90dd-c53ae7ce1723",
          "seatBid": [
            {
              "bid": [
                {
                  "id": "video4",
                  "price": 20.0,
                  "nurl": "https://useast.bfmio.com/getBids?aid=bid:86928e29-d32b-4fc2-a2bf-798ad3b75fde:11bc5dd5-7421-4dd8-c926-40fa653bec76:20.0:20.0&v=1&dsp=5f4f8e1124b4a20dd4145a01,0.01&i_type=pre",
                  "adomain": [],
                  "cat": [],
                  "attr": [],
                  "w": 0,
                  "h": 0,
                  "ext": {}
                }
              ],
              "group": 0,
              "ext": {}
            }
          ]
        }
      }
    }
  ],

  "expectedMakeRequestsErrors": [
    {
      "value": "test error (on banner imp id: built2spill)",
      "comparison": "literal"

    },
    {
      "value": "test error (on video imp id: Mixed1)",
      "comparison": "literal"

    }
  ]
}
