rules:
  - id: non-200-status-code-check
    languages: [go]
    message: |
      Recommended to use of util function from `adapters` package. Use `CheckResponseStatusCodeForErrors()` util to check if status code is not `http.StatusOK`
      ```
        if err := adapters.CheckResponseStatusCodeForErrors(response); err != nil {
          return nil, []error{err}
        }
      ```
    severity: WARNING
    pattern-either:
      - patterns:
          - pattern: |
              ...
              if $RESPONSE_STATUS_CODE != $STATUS_CODE {
                ...
              }
              ...
          - focus-metavariable: $STATUS_CODE
          - metavariable-regex:
              metavariable: "$STATUS_CODE"
              regex: "http.StatusOK"
